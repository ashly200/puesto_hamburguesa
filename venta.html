<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/png" href="logo.png">

  <title>Pedido - BurgerPoints</title>

  <style>
    /* ---------- Variables y reset sencillo ---------- */
    :root{
      --bg: #0f0f10;
      --card: #17181a;
      --accent: #ff3b30;
      --accent2: #ffa629;
      --text: #f6f7fb;
      --muted: #c9cad3;
      --radius: 12px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      background: linear-gradient(180deg, #0b0b0c 0%, #121214 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* ---------- Contenedor principal ---------- */
    .wrap{
      max-width:1100px;
      margin:32px auto;
      padding:16px;
      display:flex;
      gap:20px;
      align-items:flex-start;
    }

    /* ---------- Menu (lista de productos) ---------- */
    .menu {
      flex:1;
      background:var(--card);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 8px 30px rgba(0,0,0,.4);
    }

    .menu h2{
      margin:0 0 12px 0;
      font-size:20px;
      font-weight:700;
      letter-spacing:.2px;
    }

    .product {
      display:flex;
      gap:12px;
      align-items:center;
      padding:12px;
      border-radius:10px;
      margin-bottom:10px;
      background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    }

    .product .info {
      flex:1;
    }

    .product .name { font-weight:700; margin-bottom:6px; }
    .product .desc { color:var(--muted); font-size:13px; margin:0; }

    .product .price { font-weight:800; color:var(--accent2); }

    /* ---------- Control de cantidad (botones + -) ---------- */
    .qty {
      display:flex;
      align-items:center;
      gap:8px;
    }

    .qty button {
      background:transparent;
      border:1px solid rgba(255,255,255,0.08);
      color:var(--text);
      padding:6px 10px;
      border-radius:8px;
      cursor:pointer;
      font-weight:700;
    }

    .qty .num {
      min-width:36px;
      text-align:center;
      font-weight:700;
    }

    /* ---------- Factura / resumen ---------- */
    .cart {
      width:360px;
      min-width:260px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--radius);
      padding:18px;
      box-shadow:0 8px 30px rgba(0,0,0,.45);
    }

    .cart h3 { margin:0 0 8px 0; font-size:18px; }
    .cart .line { display:flex; justify-content:space-between; margin:8px 0; }
    .cart .small { color:var(--muted); font-size:13px; }

    .cart .items { max-height:300px; overflow:auto; margin-bottom:10px; padding-right:6px; }

    .cart-footer {
      border-top:1px dashed rgba(255,255,255,0.04);
      padding-top:12px;
      margin-top:8px;
    }

    .total-row { display:flex; justify-content:space-between; font-weight:800; font-size:18px; margin-bottom:12px; }

    .actions {
      display:flex;
      gap:10px;
    }

    .regresar{
      position:fixed;
      bottom:20px;
      right:20px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      color:#111;
      box-shadow: 0 8px 20px rgba(255,60,48,0.12);
      padding:10px 18px;
      border-radius: 999px;
      font-weight: 700;
      font-size: 14px;
      border:none;
      cursor:pointer;
    }

    .btn {
      flex:1;
      padding:10px 12px;
      border-radius:10px;
      border: none;
      cursor:pointer;
      font-weight:700;
    }

    .btn.cancel {
      background:transparent;
      border:1px solid rgba(255,255,255,0.06);
      color:var(--muted);
    }

    .btn.pay {
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      color:#111;
      box-shadow: 0 8px 20px rgba(255,60,48,0.12);
    }

    /* ---------- Modal personalizado (compra exitosa) ---------- */
    .modal-backdrop {
      position:fixed;
      inset:0;
      display:none; /* se muestra con JS */
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,0.6);
      z-index:2000;
    }

    .modal {
      background: var(--card);
      border-radius:12px;
      padding:20px;
      width:320px;
      text-align:center;
      box-shadow:0 20px 60px rgba(0,0,0,.6);
      transform: translateY(10px);
    }

    .modal h4 { margin:0 0 6px 0; font-size:20px; }
    .modal p { margin:6px 0 14px 0; color:var(--muted); }

    .modal .ok {
      padding:10px 12px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      font-weight:700;
      color:#111;
      width:100%;
    }

    /* ---------- Pequeños ajustes responsivos ---------- */
    @media (max-width: 880px){
      .wrap{ flex-direction:column; padding:12px; }
      .cart{ width:100%; order:2; }
      .menu{ order:1; }
    }
  </style>
</head>
<body>

  <div class="wrap">
    <!-- MENU: productos y controles de cantidad -->
    <div class="menu" aria-label="Lista de productos">
      <h2>Ordena aquí</h2>

      <!-- Producto: Papas -->
      <div class="product" data-id="papas" data-price="2.50">
        <div class="info">
          <div class="name">Papas fritas</div>
          <div class="desc">Porción crujiente</div>
          <div class="price">$2.50</div>
        </div>

        <div class="qty" role="group" aria-label="Cantidad papas">
          <button class="dec" aria-label="disminuir">−</button>
          <div class="num">0</div>
          <button class="inc" aria-label="aumentar">+</button>
        </div>
      </div>

      <!-- Producto: Cola -->
      <div class="product" data-id="cola" data-price="1.80">
        <div class="info">
          <div class="name">Cola</div>
          <div class="desc">Refresco 500 ml</div>
          <div class="price">$1.80</div>
        </div>

        <div class="qty" role="group" aria-label="Cantidad cola">
          <button class="dec">−</button>
          <div class="num">0</div>
          <button class="inc">+</button>
        </div>
      </div>

      <!-- Producto: Classic -->
      <div class="product" data-id="classic" data-price="4.50">
        <div class="info">
          <div class="name">Classic Cheese</div>
          <div class="desc">Carne 120g, queso</div>
          <div class="price">$4.50</div>
        </div>

        <div class="qty" role="group" aria-label="Cantidad classic">
          <button class="dec">−</button>
          <div class="num">0</div>
          <button class="inc">+</button>
        </div>
      </div>

      <!-- Producto: Bacon Smash -->
      <div class="product" data-id="bacon" data-price="6.20">
        <div class="info">
          <div class="name">Bacon Smash</div>
          <div class="desc">Doble carne y tocino</div>
          <div class="price">$6.20</div>
        </div>

        <div class="qty" role="group" aria-label="Cantidad bacon">
          <button class="dec">−</button>
          <div class="num">0</div>
          <button class="inc">+</button>
        </div>
      </div>

      <!-- Producto: Veggie -->
      <div class="product" data-id="veggie" data-price="5.90">
        <div class="info">
          <div class="name">Veggie Verde</div>
          <div class="desc">Medallón vegetal y palta</div>
          <div class="price">$5.90</div>
        </div>

        <div class="qty" role="group" aria-label="Cantidad veggie">
          <button class="dec">−</button>
          <div class="num">0</div>
          <button class="inc">+</button>
        </div>
      </div>

    </div>

    <!-- CART: factura visual -->
    <aside class="cart" aria-label="Factura">
      <h3>Factura</h3>

      <div class="items" id="cartItems">
        <!-- Aquí JS agregará las líneas de la factura -->
        <div class="small" style="text-align:center; padding:18px 0; color:var(--muted);">
          No hay productos seleccionados.
        </div>
      </div>

      <div class="cart-footer">
        <div class="line small">
          <div>Subtotal</div>
          <div id="subtotal">$0.00</div>
        </div>

        <div class="line small">
          <div>Impuesto (10%)</div>
          <div id="tax">$0.00</div>
        </div>

        <div class="total-row">
          <div>Total</div>
          <div id="total">$0.00</div>
        </div>

        <div class="actions">
          <button class="btn cancel" id="btnCancel">Cancelar</button>
          <button class="btn pay" id="btnPay">Pagar</button>
        </div>
      </div>
    </aside>
  </div>

  <!-- Modal personalizado -->
  <div class="modal-backdrop" id="modal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h4 id="modalTitle">Compra exitosa</h4>
      <p>¡Gracias! Tu pedido fue registrado.</p>
      <button class="ok" id="okBtn">Aceptar</button>
    </div>
  </div>

<a href="index.html"><button  class="regresar">regresar</button></a>
  <script>
    // ---------- Lógica simple y clara ----------

    // Obtener nodos
    const products = Array.from(document.querySelectorAll('.product'));
    const cartItemsEl = document.getElementById('cartItems');
    const subtotalEl = document.getElementById('subtotal');
    const taxEl = document.getElementById('tax');
    const totalEl = document.getElementById('total');
    const btnCancel = document.getElementById('btnCancel');
    const btnPay = document.getElementById('btnPay');
    const modal = document.getElementById('modal');
    const okBtn = document.getElementById('okBtn');

    // Representación interna del carrito: { id: {name, price, qty} }
    const cart = {};

    // Función para formatear moneda
    function money(v){
      return '$' + v.toFixed(2);
    }

    // Actualiza el DOM de la factura desde el objeto cart
    function updateCartUI(){
      // limpiar contenedor
      cartItemsEl.innerHTML = '';
      const keys = Object.keys(cart);
      if(keys.length === 0){
        cartItemsEl.innerHTML = '<div class="small" style="text-align:center; padding:18px 0; color:var(--muted);">No hay productos seleccionados.</div>';
      } else {
        keys.forEach(k=>{
          const it = cart[k];
          const row = document.createElement('div');
          row.className = 'line';
          row.innerHTML = `
            <div style="max-width:70%;">
              <div style="font-weight:700">${escapeHtml(it.name)}</div>
              <div class="small">${it.qty} × ${money(it.price)}</div>
            </div>
            <div style="font-weight:800">${money(it.price * it.qty)}</div>
          `;
          cartItemsEl.appendChild(row);
        });
      }

      // calcular totales
      let subtotal = 0;
      keys.forEach(k => subtotal += cart[k].price * cart[k].qty);
      const tax = subtotal * 0.10; // 10% ejemplo
      const total = subtotal + tax;

      // actualizar valores en pantalla
      subtotalEl.textContent = money(subtotal);
      taxEl.textContent = money(tax);
      totalEl.textContent = money(total);
    }

    // Escapar texto simple (buena práctica)
    function escapeHtml(str){
      return String(str)
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
    }

    // Vincular botones + y - para cada producto
    products.forEach(prod => {
      const id = prod.dataset.id;
      const price = parseFloat(prod.dataset.price);
      const name = prod.querySelector('.name').textContent.trim();

      // seleccionar botones
      const dec = prod.querySelector('.dec');
      const inc = prod.querySelector('.inc');
      const numEl = prod.querySelector('.num');

      // Asegurar existencia inicial en cart con qty 0
      cart[id] = { name, price, qty: 0 };

      function refreshNum() {
        numEl.textContent = String(cart[id].qty);
      }

      // incrementar
      inc.addEventListener('click', () => {
        cart[id].qty += 1;
        refreshNum();
        updateCartUI();
      });

      // decrementar
      dec.addEventListener('click', () => {
        if(cart[id].qty > 0) cart[id].qty -= 1;
        refreshNum();
        updateCartUI();
      });
    });

    // Cancelar: vacía el carrito y actualiza cantidades en la lista
    btnCancel.addEventListener('click', () => {
      for(const k in cart) cart[k].qty = 0;
      // refrescar los contadores en la UI de productos
      document.querySelectorAll('.product').forEach(p => p.querySelector('.num').textContent = '0');
      updateCartUI();
    });

    // Pagar (visual): si hay items muestra modal "Compra exitosa"
    btnPay.addEventListener('click', () => {
      const hasItems = Object.values(cart).some(i => i.qty > 0);
      if(!hasItems){
        // indicación visual pequeña (no alert): resaltamos el panel
        cartItemsEl.animate([{ background: 'transparent' }, { background: 'rgba(255,60,48,0.06)' }, { background: 'transparent' }], { duration: 600 });
        return;
      }

      // mostrar modal personalizado
      modal.style.display = 'flex';

      // opcional: limpiar carrito después de un pago "visual"
      for(const k in cart) cart[k].qty = 0;
      document.querySelectorAll('.product').forEach(p => p.querySelector('.num').textContent = '0');
      updateCartUI();
    });

    // Cerrar modal
    okBtn.addEventListener('click', () => {
      modal.style.display = 'none';
    });

    // Actualizar al inicio
    updateCartUI();
  </script>
</body>
</html>
